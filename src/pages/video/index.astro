---
import { getCollection } from 'astro:content';

import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import Layout from '../../layouts/Layout.astro';
import { countTags, getTotalTags } from '../../helpers/video.helper';
import { sortDate } from '../../helpers/helper';
import VideoMain from '../../layouts/VideoMain.astro';

const subTitle = SITE_TITLE + ' | videos';
const subDescription = `${SITE_DESCRIPTION} | videos updated`;

const videos = (await getCollection('video')).sort(sortDate);
const tags = countTags(getTotalTags(videos));
---

  <Layout title={subTitle} description={subDescription}>
    <VideoMain tags={tags} articles={videos} />
  </Layout>
